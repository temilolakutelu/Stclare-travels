!function(){var n=$('<div id="galleryOverlay">'),e=$('<div id="gallerySlider">'),t=$('<a id="prevArrow"></a>'),i=$('<a id="nextArrow"></a>'),o=!1;$.fn.touchTouch=function(){var c=$([]),a=0,u=this;function r(n){e.css("left",100*-n+"%")}function f(n){setTimeout(function(){l(n)},1e3)}function l(n){if(n<0||n>=u.length)return!1;var e,t,i;e=u.eq(n).attr("href"),t=function(){c.eq(n).html(this)},(i=$("<img>").on("load",function(){t.call(i)})).attr("src",e)}function d(){a+1<u.length?(r(++a),f(a+1)):(e.addClass("rightSpring"),setTimeout(function(){e.removeClass("rightSpring")},500))}function s(){a>0?(r(--a),f(a-1)):(e.addClass("leftSpring"),setTimeout(function(){e.removeClass("leftSpring")},500))}n.hide().appendTo("body"),e.appendTo(n),u.each(function(){c=c.add($('<div class="placeholder">'))}),e.append(c).on("click",function(e){$(e.target).is("img")||function(){if(!o)return!1;n.hide().removeClass("visible"),o=!1}()}),$("body").on("touchstart","#gallerySlider img",function(n){var t=n.originalEvent,i=t.changedTouches[0].pageX;return e.on("touchmove",function(n){n.preventDefault(),(t=n.originalEvent.touches[0]||n.originalEvent.changedTouches[0]).pageX-i>10?(e.off("touchmove"),s()):t.pageX-i<-10&&(e.off("touchmove"),d())}),!1}).on("touchend",function(){e.off("touchmove")}),u.on("click",function(e){e.preventDefault(),function(e){if(o)return!1;n.show(),setTimeout(function(){n.addClass("visible")},100),r(e),o=!0}(a=u.index(this)),l(a),f(a+1),f(a-1)}),"ontouchstart"in window||(n.append(t).append(i),t.click(function(n){n.preventDefault(),s()}),i.click(function(n){n.preventDefault(),d()})),$(window).bind("keydown",function(n){37==n.keyCode?s():39==n.keyCode&&d()})}}(jQuery);